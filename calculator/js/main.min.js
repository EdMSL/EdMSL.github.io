"use strict";!function(){var DEFAULT_CURRENT_NUMBER="0",FLOAT_PRECISION=10,calculator=document.querySelector(".calculator"),buttons=calculator.querySelector(".buttons"),calculationField=calculator.querySelector("#screen_calculation"),numberField=calculator.querySelector("#screen_number"),ArithmeticSigns={SEGMENTATION_SIGN:" / ",MULTIPLICATION_SIGN:" * ",SUMMATION_SIGN:" + ",SUBTRACTION_SIGN:" - "},isFloat=!1,isNewOperation=!0,isLastOperationArithmetic=!1,isFirstOperation=!0,currentNumber=DEFAULT_CURRENT_NUMBER,currentCalculationStr="",currentOperationStr="",currentResult="",operations={arithmetic:doArithmeticOperation,segmentation:getArithmeticOperation,multiplication:getArithmeticOperation,summation:getArithmeticOperation,subtraction:getArithmeticOperation,clear:resetCalculation,delete:deleteCurrentNumberSimbol,float:setFloatingPointNumber,result:getCalculationResult};function setBooleansDefault(){isLastOperationArithmetic=!(isNewOperation=!(isFloat=!1))}function getArithmeticOperation(t){operations.arithmetic(t)}function getResult(){return Number(eval(currentOperationStr).toFixed(FLOAT_PRECISION))}function setNextCalculationStep(){isLastOperationArithmetic=isNewOperation=!(isFloat=!1)}function changeCurrentCalculationStr(t){currentCalculationStr+=Number(currentNumber)+ArithmeticSigns[t],calculationField.value=currentCalculationStr}function changeNextArithmeticOperation(t){currentCalculationStr=currentCalculationStr.slice(0,-3)+ArithmeticSigns[t],currentOperationStr=currentOperationStr.slice(0,-3)+ArithmeticSigns[t],calculationField.value=currentCalculationStr}function startNewOperationAfterTotalDeletion(t){replaceCurrentNumber(DEFAULT_CURRENT_NUMBER),isNewOperation=!0}function clearDisplay(t){t.value=""}function changeCurrentNumber(t){currentNumber+=t,numberField.value=currentNumber}function replaceCurrentNumber(t){currentNumber="",changeCurrentNumber(t)}function doArithmeticOperation(t){var e=t.toUpperCase()+"_SIGN";isLastOperationArithmetic?changeNextArithmeticOperation(e):(isFirstOperation?currentOperationStr+=currentNumber+ArithmeticSigns[e]:(currentOperationStr+=currentNumber,currentResult=getResult(),numberField.value=currentResult,currentOperationStr=currentResult+ArithmeticSigns[e]),changeCurrentCalculationStr(e),setNextCalculationStep()),isFirstOperation&&(isFirstOperation=!1)}function resetCalculation(){currentNumber=numberField.value=DEFAULT_CURRENT_NUMBER,currentCalculationStr=currentOperationStr=currentResult="",clearDisplay(calculationField),setBooleansDefault()}function deleteCurrentNumberSimbol(){var t,e=currentNumber[currentNumber.length-1];isNewOperation||(1<currentNumber.length?("."===e&&(isFloat=!1),replaceCurrentNumber(t=currentNumber.slice(0,-1)),currentNumber===DEFAULT_CURRENT_NUMBER&&startNewOperationAfterTotalDeletion(t)):startNewOperationAfterTotalDeletion(t))}function setFloatingPointNumber(){isFloat||(isNewOperation&&replaceCurrentNumber(DEFAULT_CURRENT_NUMBER),changeCurrentNumber("."),isNewOperation=!(isFloat=!0))}function changeCurrentCalculation(t){var e=Number(t);if(isNaN(e))operations[t](t);else{if(isLastOperationArithmetic&&(isLastOperationArithmetic=!1),isNewOperation){if(0===e)return void replaceCurrentNumber(DEFAULT_CURRENT_NUMBER);clearDisplay(numberField),currentNumber="",isNewOperation=!1}changeCurrentNumber(e)}}function getCalculationResult(){isFirstOperation||(currentOperationStr+=currentNumber,currentResult=getResult(),currentCalculationStr=currentOperationStr="",replaceCurrentNumber(currentResult),clearDisplay(calculationField),setBooleansDefault())}function onButtonClick(t){t.preventDefault();var e=t.target;"BUTTON"===e.tagName&&changeCurrentCalculation(e.dataset.type)}clearDisplay(calculationField),buttons.addEventListener("click",onButtonClick)}();